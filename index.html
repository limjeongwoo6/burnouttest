<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>하루 번아웃 진단테스트</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #2D5A3D 0%, #4A7C59 50%, #6B9B7A 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
            padding: 40px 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-weight: 800;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            line-height: 1.6;
        }

        .progress-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .progress-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #4A7C59, #6B9B7A);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4A7C59, #6B9B7A);
            transition: width 0.5s ease;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-text {
            text-align: center;
            font-weight: 600;
            color: #666;
            font-size: 1.1rem;
        }

        .question-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .question-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #4A7C59, #6B9B7A);
        }

        .question-card.show {
            opacity: 1;
            transform: translateY(0);
        }

        .question-number {
            display: inline-block;
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #4A7C59, #6B9B7A);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 35px;
            font-weight: bold;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(74, 124, 89, 0.3);
            transition: all 0.3s ease;
        }

        .question-number:hover {
            transform: scale(1.1);
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.6;
            color: #333;
            font-weight: 500;
        }

        .options {
            display: grid;
            gap: 10px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #fafafa;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            border-color: #6B9B7A;
            background: #f0f8f2;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(74, 124, 89, 0.2);
        }

        .option.selected {
            border-color: #4A7C59;
            background: #e8f5e8;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(74, 124, 89, 0.3);
        }

        .option.selected::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #4A7C59, #6B9B7A);
        }

        .option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.3);
            accent-color: #4A7C59;
        }

        .option label {
            cursor: pointer;
            flex: 1;
            font-weight: 500;
            font-size: 1rem;
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4A7C59, #6B9B7A);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 124, 89, 0.4);
        }

        .btn-secondary {
            background: #f5f5f5;
            color: #666;
            position: relative;
            overflow: hidden;
        }

        .btn-secondary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0,0,0,0.1), transparent);
            transition: left 0.5s;
        }

        .btn-secondary:hover::before {
            left: 100%;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
            background: #ccc !important;
            color: #666 !important;
        }

        .btn:not(:disabled) {
            opacity: 1;
            cursor: pointer;
        }

        .btn:not(:disabled):hover {
            transform: translateY(-2px);
        }

        .btn:not(:disabled):active {
            transform: translateY(0);
        }

        .btn:not(:disabled):focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(74, 124, 89, 0.3);
        }

        .btn:not(:disabled):focus-visible {
            outline: 2px solid #4A7C59;
            outline-offset: 2px;
        }

        .btn:not(:disabled):focus-visible:active {
            outline: 2px solid #6B9B7A;
        }

        .btn:not(:disabled):focus-visible:hover {
            outline: 2px solid #4A7C59;
        }

        .btn:not(:disabled):focus-visible:focus {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:active {
            outline: 2px solid #764ba2;
        }

        .btn:not(:disabled):focus-visible:focus:hover {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active {
            outline: 2px solid #764ba2;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active {
            outline: 2px solid #764ba2;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active {
            outline: 2px solid #764ba2;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active {
            outline: 2px solid #764ba2;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active {
            outline: 2px solid #764ba2;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active {
            outline: 2px solid #764ba2;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active {
            outline: 2px solid #764ba2;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active {
            outline: 2px solid #764ba2;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active {
            outline: 2px solid #764ba2;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active {
            outline: 2px solid #764ba2;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active {
            outline: 2px solid #764ba2;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active {
            outline: 2px solid #764ba2;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus {
            outline: 2px solid #667eea;
        }

        .btn:not(:disabled):focus-visible:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover:active:focus:hover {
            outline: 2px solid #667eea;
        }

        .results-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-top: 20px;
            box-shadow: 0 15px 35px rgba(15, 81, 50, 0.08);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(25, 135, 84, 0.1);
        }

        .results-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #4A7C59, #6B9B7A);
        }

        .results-container.show {
            opacity: 1;
            transform: translateY(0);
        }

        .result-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid #4A7C59;
            transition: all 0.3s ease;
            border: 1px solid rgba(74, 124, 89, 0.1);
        }

        .result-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .result-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #2C3E50;
            border-bottom: 3px solid #4A7C59;
            padding-bottom: 10px;
        }

        .result-content {
            color: #34495E;
            line-height: 1.7;
            font-size: 1.1rem;
        }

        .type-distribution {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .type-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e0e0e0;
            transition: all 0.3s ease;
        }

        .type-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .type-item.primary {
            border-color: #4A7C59;
            background: #f0f8f2;
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(74, 124, 89, 0.3);
        }

        .type-name {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }

        .type-percentage {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4A7C59;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .stage-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .stage-pill {
            padding: 8px 20px;
            margin: 0 10px;
            border-radius: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            font-weight: 500;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .stage-pill.active {
            background: white;
            color: #4A7C59;
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(255,255,255,0.3);
            font-weight: 600;
        }

        .stage-separator {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #F0F8F2 0%, #E8F5E8 100%);
            border-radius: 20px;
            margin: 30px 0;
            border: 1px solid rgba(74, 124, 89, 0.1);
        }

        .stage-separator h2 {
            color: #4A7C59;
            font-size: 2rem;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .stage-separator p {
            color: #495057;
            font-size: 1.1rem;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .continue-btn {
            background: linear-gradient(135deg, #4A7C59 0%, #6B9B7A 100%);
            color: white;
            padding: 18px 40px;
            border: none;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 8px 25px rgba(74, 124, 89, 0.3);
        }

        .continue-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(74, 124, 89, 0.4);
            background: linear-gradient(135deg, #3A6B49 0%, #5A8B69 100%);
        }

        .consultation-card {
            background: linear-gradient(135deg, #F8F9FA 0%, #E9ECEF 100%);
            border-radius: 20px;
            padding: 30px;
            margin: 25px 0;
            border: 2px solid #4A7C59;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .consultation-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #4A7C59, #6B9B7A);
        }

        .consultation-card h3 {
            color: #4A7C59;
            font-size: 1.5rem;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .consultation-card p {
            color: #495057;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .consultation-btn {
            background: linear-gradient(135deg, #4A7C59 0%, #6B9B7A 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            box-shadow: 0 6px 20px rgba(74, 124, 89, 0.3);
        }

        .consultation-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(74, 124, 89, 0.4);
            background: linear-gradient(135deg, #3A6B49 0%, #5A8B69 100%);
            text-decoration: none;
            color: white;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .question-card {
                padding: 20px;
            }
            
            .button-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>하루 번아웃 진단테스트</h1>
            <p>1차 진단으로 번아웃 위험도를 확인하고, 이어서 2차 진단으로 유형 분포를 확인하세요.</p>
        </div>

        <div class="stage-indicator">
            <div class="stage-pill active" id="stage1-indicator">1차 진단</div>
            <div class="stage-pill" id="stage2-indicator">2차 진단</div>
            <div class="stage-pill" id="stage3-indicator">종합 결과</div>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-text" id="progress-text">진행도: 0/22 (0%)</div>
        </div>

        <div id="question-container"></div>

        <div class="button-container" id="button-container">
            <button class="btn btn-secondary" id="reset-btn" onclick="resetTest()">초기화</button>
            <button class="btn btn-primary" id="next-btn" onclick="nextQuestion()" disabled>다음</button>
        </div>

        <div class="results-container" id="results-container">
            <div id="results-content"></div>
        </div>
    </div>

    <script>
        // 1차 진단 문항 (12문항)
        const stage1Questions = [
            { id: "S1_Q1", text: "아침에 일어나면 출근(등교)하고 싶지 않다." },
            { id: "S1_Q2", text: "하루가 끝나면 완전히 지쳐서 아무것도 할 수 없다." },
            { id: "S1_Q3", text: "업무·공부 성과가 눈에 띄게 떨어진 것 같다." },
            { id: "S1_Q4", text: "동료·고객·주변 사람과의 대화가 피곤하고 귀찮다." },
            { id: "S1_Q5", text: "쉬는 시간에도 계속 업무·공부 생각을 한다." },
            { id: "S1_Q6", text: "스스로 무능력하다고 느낀다." },
            { id: "S1_Q7", text: "출근길(등굣길)에 몸이 무겁고 피곤하다." },
            { id: "S1_Q8", text: "주말이 지나도 피로가 풀리지 않는다." },
            { id: "S1_Q9", text: "최근 일의 의미가 점점 사라진 것 같다." },
            { id: "S1_Q10", text: "노력해도 인정받지 못한다고 느낀다." },
            { id: "S1_Q11", text: "'더 해야 한다'는 압박감 때문에 불안하다." },
            { id: "S1_Q12", text: "일의 미래가 보이지 않아 회의감이 든다." }
        ];

        // 2차 진단 문항 (10문항)
        const stage2Questions = [
            {
                id: "T2_Q1",
                text: "업무가 몰릴 때, 나의 기본 반응은?",
                choices: [
                    { key: "O", label: "더 몰아붙여서라도 끝낸다 (쉬면 불안)" },
                    { key: "N", label: "해도 달라질 게 없다고 느껴 손이 안 간다" },
                    { key: "F", label: "이게 무슨 의미가 있나 회의감이 든다" },
                    { key: "ON", label: "해야 하지만 인정 못 받을 것 같아 지친다" },
                    { key: "NF", label: "의미도 없고 인정도 못 받는 기분이다" }
                ]
            },
            {
                id: "T2_Q2",
                text: "주말의 나를 가장 잘 설명하는 말은?",
                choices: [
                    { key: "O", label: "쉬면 뒤처질까 불안해서 일 관련 정리한다" },
                    { key: "N", label: "충전해도 월요일이면 다시 방전될 것 같다" },
                    { key: "F", label: "무엇을 해도 의미가 잘 느껴지지 않는다" },
                    { key: "ON", label: "해야 할 건 많지만 동력은 잘 안 붙는다" },
                    { key: "NF", label: "일도 싫고, 한다고 달라질 것도 없다" }
                ]
            },
            {
                id: "T2_Q3",
                text: "성과 피드백을 받았을 때 드는 생각은?",
                choices: [
                    { key: "O", label: "더 잘하려면 쉬면 안 된다" },
                    { key: "N", label: "열심히 해도 인정 못 받는구나" },
                    { key: "F", label: "내가 진짜 원하는 길이 맞나?" },
                    { key: "ON", label: "해야 하지만 어차피 인정은 못 받을 듯" },
                    { key: "NF", label: "인정도 의미도 없다는 생각이 든다" }
                ]
            },
            {
                id: "T2_Q4",
                text: "동료가 퇴근 후 쉬라고 할 때 나의 반응은?",
                choices: [
                    { key: "O", label: "불안해서 조금 더 일한다" },
                    { key: "N", label: "쉬어도 내일 변화 없을 것 같아 무덤덤" },
                    { key: "F", label: "쉬어도 방향이 없으니 공허하다" },
                    { key: "ON", label: "쉬고 싶지만 성과 압박과 인정 갈증이 섞인다" },
                    { key: "NF", label: "쉬어도 의미 없고 인정도 없다" }
                ]
            },
            {
                id: "T2_Q5",
                text: "프로젝트 초기 단계에서 가장 큰 고민은?",
                choices: [
                    { key: "O", label: "완벽하게 해낼 수 있을지 불안하다" },
                    { key: "N", label: "내가 해도 결과는 똑같을 것 같다" },
                    { key: "F", label: "이게 내 커리어/가치와 맞는가?" },
                    { key: "ON", label: "성과도 중요하지만 인정받을 수 있을까?" },
                    { key: "NF", label: "애써도 의미도 인정도 못 얻을 듯하다" }
                ]
            },
            {
                id: "T2_Q6",
                text: "업무 중 집중이 깨질 때 가장 가까운 이유는?",
                choices: [
                    { key: "O", label: "더 해야 한다는 압박으로 과몰입/불안" },
                    { key: "N", label: "무기력과 체념으로 손이 멈춘다" },
                    { key: "F", label: "의미 상실로 집중이 어려움" },
                    { key: "ON", label: "해야 하지만 인정받지 못할 듯해 동력이 약함" },
                    { key: "NF", label: "의미도 인정도 없어 집중이 풀린다" }
                ]
            },
            {
                id: "T2_Q7",
                text: "야근이 잦아질 때 마음 상태는?",
                choices: [
                    { key: "O", label: "그래도 성과 내려면 버텨야 한다" },
                    { key: "N", label: "버텨도 달라질 게 없다" },
                    { key: "F", label: "내가 원하는 삶과 멀어지는 느낌" },
                    { key: "ON", label: "버텨야 하지만 인정도 못 받을 것 같다" },
                    { key: "NF", label: "버텨도 의미·인정 모두 없다" }
                ]
            },
            {
                id: "T2_Q8",
                text: "성과를 낸 후 하루, 나는 보통…",
                choices: [
                    { key: "O", label: "더 달려야 한다고 느낀다 (쉬면 불안)" },
                    { key: "N", label: "다음엔 운이 없으면 못 할 듯하다" },
                    { key: "F", label: "왜 이렇게까지 해야 했지? 의미가 의문" },
                    { key: "ON", label: "또 해내야 하는데 인정 받을진 모르겠다" },
                    { key: "NF", label: "성과도 결국 별 의미·인정이 없다" }
                ]
            },
            {
                id: "T2_Q9",
                text: "새 목표를 세울 때 가장 먼저 떠오르는 생각은?",
                choices: [
                    { key: "O", label: "완벽한 계획과 몰입으로 밀어붙이자" },
                    { key: "N", label: "해도 큰 변화는 없을 것 같다" },
                    { key: "F", label: "이 목표가 내 가치와 맞는가?" },
                    { key: "ON", label: "성과도 중요하고 인정도 받아야 한다" },
                    { key: "NF", label: "의미도 희미하고 인정도 기대 안 한다" }
                ]
            },
            {
                id: "T2_Q10",
                text: "팀/상사와 갈등 시 드는 생각은?",
                choices: [
                    { key: "O", label: "내가 더 잘해야 한다는 부담이 커진다" },
                    { key: "N", label: "어차피 바뀌지 않는다 (체념)" },
                    { key: "F", label: "여기서 내 성장이 가능한가?" },
                    { key: "ON", label: "성과·인정 모두 불안정해 더 지친다" },
                    { key: "NF", label: "의미 없고 인정도 못 받을 갈등 같다" }
                ]
            }
        ];

        // 1차 진단 등급 기준
        const stage1Bands = [
            { label: "번아웃 위험 낮음", min: 12, max: 24, color: "#16a34a" },
            { label: "경도 번아웃 가능성", min: 25, max: 40, color: "#f59e0b" },
            { label: "번아웃 위험 (상담 필요)", min: 41, max: 60, color: "#dc2626" }
        ];

        // 2차 진단 가중치
        const stage2Weights = {
            O: { overload: 1 },
            N: { neglect: 1 },
            F: { frustration: 1 },
            ON: { overload: 0.5, neglect: 0.5 },
            NF: { neglect: 0.5, frustration: 0.5 }
        };

        const typeLabels = {
            overload: "과부하형",
            neglect: "방치형",
            frustration: "좌절형"
        };

        const typeDescriptions = {
            overload: "끊임없이 더 많이, 더 완벽하게 해야 한다는 압박이 큽니다. '쉬면 뒤처진다'는 불안으로 과로·자기희생이 반복됩니다.",
            neglect: "노력 대비 인정·보상이 부족하다고 느끼며 무기력과 냉소가 쌓입니다. 효능감 저하와 회피가 나타나기 쉽습니다.",
            frustration: "기대와 현실의 괴리가 크고, 일의 의미·목표가 흐려집니다. 동기 상실과 방향성 혼란이 핵심입니다."
        };

        // 전역 변수
        let currentStage = 1;
        let currentQuestionIndex = 0;
        let stage1Answers = {};
        let stage2Answers = {};
        let totalQuestions = stage1Questions.length + stage2Questions.length;

        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', function() {
            // 초기 상태 설정
            currentStage = 1;
            currentQuestionIndex = 0;
            stage1Answers = {};
            stage2Answers = {};
            
            // UI 초기화
            document.querySelectorAll('.stage-pill').forEach(pill => pill.classList.remove('active'));
            const stage1Indicator = document.getElementById('stage1-indicator');
            if (stage1Indicator) {
                stage1Indicator.classList.add('active');
            }
            
            // 진행률 초기화
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            if (progressFill) progressFill.style.width = '0%';
            if (progressText) progressText.textContent = '진행도: 0/22 (0%)';
            
            // 다음 버튼 초기화
            const nextBtn = document.getElementById('next-btn');
            if (nextBtn) {
                nextBtn.disabled = true;
                nextBtn.textContent = '선택해주세요';
            }
            
            // 첫 번째 질문 표시
            showQuestion();
            updateProgress();
        });

        function showQuestion() {
            const container = document.getElementById('question-container');
            if (!container) return;
            
            const isStage1 = currentStage === 1;
            const questions = isStage1 ? stage1Questions : stage2Questions;
            const question = questions[currentQuestionIndex];
            
            if (!question) {
                showResults();
                return;
            }

            let html = `
                <div class="question-card show">
                    <div class="question-number">${currentQuestionIndex + 1}</div>
                    <div class="question-text">${question.text}</div>
                    <div class="options">
            `;

            if (isStage1) {
                // 1차 진단: 5점 리커트 척도
                const likertOptions = [
                    { value: 1, label: "1 전혀 아니다" },
                    { value: 2, label: "2 거의 아니다" },
                    { value: 3, label: "3 보통이다" },
                    { value: 4, label: "4 그렇다" },
                    { value: 5, label: "5 매우 그렇다" }
                ];

                likertOptions.forEach(option => {
                    const isSelected = stage1Answers[question.id] === option.value;
                    html += `
                        <div class="option ${isSelected ? 'selected' : ''}" onclick="selectStage1Option('${question.id}', ${option.value})">
                            <input type="radio" name="${question.id}" value="${option.value}" ${isSelected ? 'checked' : ''}>
                            <label>${option.label}</label>
                        </div>
                    `;
                });
            } else {
                // 2차 진단: 선택형 문항
                question.choices.forEach(choice => {
                    const isSelected = stage2Answers[question.id] === choice.key;
                    html += `
                        <div class="option ${isSelected ? 'selected' : ''}" onclick="selectStage2Option('${question.id}', '${choice.key}')">
                            <input type="radio" name="${question.id}" value="${choice.key}" ${isSelected ? 'checked' : ''}>
                            <label>${choice.label}</label>
                        </div>
                    `;
                });
            }

            html += `
                    </div>
                </div>
            `;

            container.innerHTML = html;
            
            // 선택된 옵션이 있다면 시각적으로 표시
            if (isStage1 && stage1Answers[question.id]) {
                const selectedValue = stage1Answers[question.id];
                const selectedRadio = document.querySelector(`input[name="${question.id}"][value="${selectedValue}"]`);
                if (selectedRadio) {
                    selectedRadio.checked = true;
                    selectedRadio.closest('.option').classList.add('selected');
                }
            } else if (!isStage1 && stage2Answers[question.id]) {
                const selectedValue = stage2Answers[question.id];
                const selectedRadio = document.querySelector(`input[name="${question.id}"][value="${selectedValue}"]`);
                if (selectedRadio) {
                    selectedRadio.checked = true;
                    selectedRadio.closest('.option').classList.add('selected');
                }
            }
            
            updateProgress();
            updateNextButton();
        }

        function selectStage1Option(questionId, value) {
            stage1Answers[questionId] = value;
            
            // 현재 질문의 모든 옵션에서 선택 해제
            const currentOptions = document.querySelectorAll(`input[name="${questionId}"]`);
            currentOptions.forEach(radio => {
                radio.checked = false;
                radio.closest('.option').classList.remove('selected');
            });
            
            // 선택된 옵션만 체크
            const selectedRadio = document.querySelector(`input[name="${questionId}"][value="${value}"]`);
            if (selectedRadio) {
                selectedRadio.checked = true;
                selectedRadio.closest('.option').classList.add('selected');
            }
            
            updateNextButton();
            updateProgress();
        }

        function selectStage2Option(questionId, value) {
            stage2Answers[questionId] = value;
            
            // 현재 질문의 모든 옵션에서 선택 해제
            const currentOptions = document.querySelectorAll(`input[name="${questionId}"]`);
            currentOptions.forEach(radio => {
                radio.checked = false;
                radio.closest('.option').classList.remove('selected');
            });
            
            // 선택된 옵션만 체크
            const selectedRadio = document.querySelector(`input[name="${questionId}"][value="${value}"]`);
            if (selectedRadio) {
                selectedRadio.checked = true;
                selectedRadio.closest('.option').classList.add('selected');
            }
            
            updateNextButton();
            updateProgress();
        }

        function updateNextButton() {
            const nextBtn = document.getElementById('next-btn');
            if (!nextBtn) return;
            
            const isStage1 = currentStage === 1;
            const questions = isStage1 ? stage1Questions : stage2Questions;
            const answers = isStage1 ? stage1Answers : stage2Answers;
            const question = questions[currentQuestionIndex];
            
            if (!question) {
                nextBtn.disabled = true;
                nextBtn.textContent = '선택해주세요';
                return;
            }
            
            const hasAnswer = answers[question.id] !== undefined;
            
            if (hasAnswer) {
                nextBtn.disabled = false;
                if (currentQuestionIndex === questions.length - 1) {
                    nextBtn.textContent = isStage1 ? '1차 결과 보기 & 2차로 진행' : '종합 결과 보기';
                } else {
                    nextBtn.textContent = '다음';
                }
            } else {
                nextBtn.disabled = true;
                nextBtn.textContent = '선택해주세요';
            }
        }

        function nextQuestion() {
            const isStage1 = currentStage === 1;
            const questions = isStage1 ? stage1Questions : stage2Questions;
            const answers = isStage1 ? stage1Answers : stage2Answers;
            const question = questions[currentQuestionIndex];
            
            if (!question) {
                alert('질문을 찾을 수 없습니다.');
                return;
            }
            
            // 현재 질문에 답변이 있는지 확인
            if (!answers[question.id]) {
                alert('답변을 선택해주세요.');
                return;
            }
            
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                // 현재 단계 완료
                if (currentStage === 1) {
                    // 1차 진단 완료, 1차 결과 표시
                    showStage1Results();
                } else {
                    // 2차 진단 완료, 종합 결과 표시
                    showFinalResults();
                }
            }
        }

        function updateStageIndicator() {
            const stagePills = document.querySelectorAll('.stage-pill');
            stagePills.forEach(pill => pill.classList.remove('active'));
            
            const activeStage = document.getElementById(`stage${currentStage}-indicator`);
            if (activeStage) {
                activeStage.classList.add('active');
            }
        }

        function updateProgress() {
            const isStage1 = currentStage === 1;
            const currentQuestions = isStage1 ? stage1Questions : stage2Questions;
            const currentAnswers = isStage1 ? stage1Answers : stage2Answers;
            const currentAnswered = Object.keys(currentAnswers).length;
            const currentTotal = currentQuestions.length;
            const progress = (currentAnswered / currentTotal) * 100;
            
            // 진행률 바 업데이트
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            
            if (progressFill && progressText) {
                progressFill.style.width = `${progress}%`;
                progressText.textContent = `진행도: ${currentAnswered}/${currentTotal} (${Math.round(progress)}%)`;
                
                // 현재 단계 완료시 100%로 설정
                if (currentAnswered === currentTotal) {
                    progressFill.style.width = '100%';
                    progressText.textContent = `진행도: ${currentAnswered}/${currentTotal} (100%)`;
                }
            }
        }

        function calculateStage1Result() {
            const total = Object.values(stage1Answers).reduce((sum, value) => sum + value, 0);
            const band = stage1Bands.find(b => total >= b.min && total <= b.max);
            return { total, band };
        }

        function calculateStage2Result() {
            const scores = { overload: 0, neglect: 0, frustration: 0 };
            
            Object.values(stage2Answers).forEach(choiceKey => {
                const weights = stage2Weights[choiceKey];
                if (weights) {
                    Object.entries(weights).forEach(([type, weight]) => {
                        scores[type] += weight;
                    });
                }
            });

            const total = Object.values(scores).reduce((sum, value) => sum + value, 0);
            const distribution = Object.entries(scores).map(([key, value]) => ({
                key,
                label: typeLabels[key],
                value,
                percentage: total === 0 ? 0 : Math.round((value / total) * 100)
            })).sort((a, b) => b.value - a.value);

            return { scores, distribution };
        }

        function showStage1Results() {
            const stage1Result = calculateStage1Result();
            
            // 스테이지 인디케이터 업데이트
            updateStageIndicator();
            
            const resultsHtml = `
                <div class="result-card">
                    <div class="result-title">🎯 1차 진단 결과</div>
                    <div class="result-content">
                        <div style="text-align: center; margin: 20px 0;">
                            <div style="font-size: 3rem; font-weight: bold; color: ${stage1Result.band ? stage1Result.band.color : '#198754'}; margin-bottom: 10px;">
                                ${stage1Result.total}/60
                            </div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: ${stage1Result.band ? stage1Result.band.color : '#198754'};">
                                ${stage1Result.band ? stage1Result.band.label : '등급 계산 실패'}
                            </div>
                        </div>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-top: 20px;">
                            <h4 style="color: #198754; margin-bottom: 10px;">📊 점수 해석</h4>
                            <p style="margin-bottom: 10px;"><strong>낮은 위험 (0-20점):</strong> 번아웃 위험이 낮습니다. 현재 상태를 유지하세요.</p>
                            <p style="margin-bottom: 10px;"><strong>보통 위험 (21-40점):</strong> 주의가 필요합니다. 스트레스 관리에 신경 쓰세요.</p>
                            <p><strong>높은 위험 (41-60점):</strong> 전문가 상담을 권장합니다. 즉시 도움을 받으세요.</p>
                        </div>
                    </div>
                </div>

                <div class="stage-separator">
                    <h2>🔍 2차 진단으로 넘어가기</h2>
                    <p>1차 진단이 완료되었습니다. 이제 번아웃 유형을 분석하는 2차 진단을 진행해보세요.</p>
                    <p>2차 진단에서는 과부하형, 방치형, 좌절형 중 어떤 유형에 해당하는지 확인할 수 있습니다.</p>
                    <button class="continue-btn" onclick="startStage2()">2차 진단 시작하기</button>
                </div>

                <div class="button-container">
                    <button class="btn btn-secondary" onclick="resetTest()">처음부터 다시</button>
                    <button class="btn btn-primary" onclick="window.location.reload()">새로 시작</button>
                </div>
            `;

            // 결과 표시
            const resultsContent = document.getElementById('results-content');
            const resultsContainer = document.getElementById('results-container');
            const questionContainer = document.getElementById('question-container');
            const buttonContainer = document.getElementById('button-container');
            const progressContainer = document.getElementById('progress-container');
            
            if (resultsContent) resultsContent.innerHTML = resultsHtml;
            if (resultsContainer) resultsContainer.classList.add('show');
            if (questionContainer) questionContainer.style.display = 'none';
            if (buttonContainer) buttonContainer.style.display = 'none';
            if (progressContainer) progressContainer.style.display = 'none';
        }

        function startStage2() {
            // 2차 진단 시작
            currentStage = 2;
            currentQuestionIndex = 0;
            
            // UI 업데이트
            updateStageIndicator();
            
            // 결과 컨테이너 숨기기
            const resultsContainer = document.getElementById('results-container');
            const questionContainer = document.getElementById('question-container');
            const buttonContainer = document.getElementById('button-container');
            const progressContainer = document.getElementById('progress-container');
            
            if (resultsContainer) resultsContainer.classList.remove('show');
            if (questionContainer) questionContainer.style.display = 'block';
            if (buttonContainer) buttonContainer.style.display = 'flex';
            if (progressContainer) progressContainer.style.display = 'block';
            
            // 첫 번째 질문 표시
            showQuestion();
            updateProgress();
        }

        function showFinalResults() {
            const stage1Result = calculateStage1Result();
            const stage2Result = calculateStage2Result();
            
            // 스테이지 인디케이터 업데이트
            updateStageIndicator();
            const stage3Indicator = document.getElementById(`stage3-indicator`);
            if (stage3Indicator) {
                stage3Indicator.classList.add('active');
            }
            
            const resultsHtml = `
                <div class="result-card">
                    <div class="result-title">🎯 1차 진단 결과</div>
                    <div class="result-content">
                        <strong>총점: ${stage1Result.total} / 60</strong><br>
                        ${stage1Result.band ? `<span style="color: ${stage1Result.band.color}; font-weight: bold;">${stage1Result.band.label}</span>` : '등급 계산 실패'}
                    </div>
                </div>

                <div class="result-card">
                    <div class="result-title">🔍 2차 유형 분포</div>
                    <div class="type-distribution">
                        ${stage2Result.distribution.map((item, index) => `
                            <div class="type-item ${index === 0 ? 'primary' : ''}">
                                <div class="type-name">${item.label}</div>
                                <div class="type-percentage">${item.percentage}%</div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="result-content">
                        <strong>대표 판정: ${stage2Result.distribution[0].label}</strong><br>
                        ${stage2Result.distribution[0].percentage >= 40 ? '' : 
                          `(2위와의 차이가 10% 이하인 경우 ${stage2Result.distribution[1].label}와 조합형으로 판정)`
                        }
                    </div>
                </div>

                <div class="result-card">
                    <div class="result-title">📚 유형 해설</div>
                    <div class="result-content">
                        ${Object.entries(typeDescriptions).map(([key, desc]) => `
                            <div style="margin-bottom: 15px;">
                                <strong>${typeLabels[key]}:</strong><br>
                                ${desc}
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="consultation-card">
                    <h3>💡 1:1 번아웃 무료 전화상담 신청</h3>
                    <p>매일 하루가 답답하고 불안하고 괴로운데 어떻게 해결해야 될지 모르시지 않으시나요?</p>
                    <p>번아웃 하루 코칭은 '하루'라는 단위에 온전히 몰입함으로써, 불안 없이 일과 삶을 분리하고 번아웃을 극복하고 나의 일상을 회복할 수 있도록 돕습니다.</p>
                    <a href="https://forms.gle/QFJMPVWV9nRq862j6" target="_blank" class="consultation-btn">
                        무료 전화상담 신청하기
                    </a>
                </div>

                <div class="button-container">
                    <button class="btn btn-secondary" onclick="resetTest()">다시 시작</button>
                    <button class="btn btn-primary" onclick="window.location.reload()">새로 시작</button>
                </div>
            `;

            // 결과 표시
            const resultsContent = document.getElementById('results-content');
            const resultsContainer = document.getElementById('results-container');
            const questionContainer = document.getElementById('question-container');
            const buttonContainer = document.getElementById('button-container');
            const progressContainer = document.getElementById('progress-container');
            
            if (resultsContent) resultsContent.innerHTML = resultsHtml;
            if (resultsContainer) resultsContainer.classList.add('show');
            if (questionContainer) questionContainer.style.display = 'none';
            if (buttonContainer) buttonContainer.style.display = 'none';
            if (progressContainer) progressContainer.style.display = 'none';
        }

        function resetTest() {
            // 전역 변수 초기화
            currentStage = 1;
            currentQuestionIndex = 0;
            stage1Answers = {};
            stage2Answers = {};
            
            // 스테이지 인디케이터 초기화
            document.querySelectorAll('.stage-pill').forEach(pill => pill.classList.remove('active'));
            const stage1Indicator = document.getElementById('stage1-indicator');
            if (stage1Indicator) {
                stage1Indicator.classList.add('active');
            }
            
            // UI 요소들 초기화
            const resultsContainer = document.getElementById('results-container');
            const questionContainer = document.getElementById('question-container');
            const buttonContainer = document.getElementById('button-container');
            const progressContainer = document.getElementById('progress-container');
            
            if (resultsContainer) resultsContainer.classList.remove('show');
            if (questionContainer) questionContainer.style.display = 'block';
            if (buttonContainer) buttonContainer.style.display = 'flex';
            if (progressContainer) progressContainer.style.display = 'block';
            
            // 결과 컨테이너 내용 초기화
            const resultsContent = document.getElementById('results-content');
            if (resultsContent) resultsContent.innerHTML = '';
            
            // 진행률 초기화
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            if (progressFill) progressFill.style.width = '0%';
            if (progressText) progressText.textContent = '진행도: 0/22 (0%)';
            
            // 첫 번째 질문 표시
            showQuestion();
            updateProgress();
            
            // 다음 버튼 상태 업데이트 (showQuestion 후에 실행)
            setTimeout(() => {
                updateNextButton();
            }, 100);
        }
    </script>
</body>
</html>
